storage_mode "git"
git_url "git@github.com:duckduckgo/Apple-certificates.git"
git_branch "ios"
platform "ios"

type "appstore"
app_identifier ["com.duckduckgo.mobile.ios", "com.duckduckgo.mobile.ios.ShareExtension", "com.duckduckgo.mobile.ios.OpenAction2", "com.duckduckgo.mobile.ios.Widgets", "com.duckduckgo.mobile.ios.NetworkExtension"]
generate_apple_certs false
template_name "Default Web Browser iOS (Dist)"

for_lane :sync_signing_adhoc do
    type "adhoc"
    force_for_new_devices true
end

# This code sets the App Store release to read-only mode when the CI triggers it. Conversely, the Ad-hoc build remains in read-write mode regardless of where it's triggered from.
for_lane :sync_signing do
    readonly: is_ci
end

for_lane :adhoc do
    type "adhoc"
    force_for_new_devices true
end
